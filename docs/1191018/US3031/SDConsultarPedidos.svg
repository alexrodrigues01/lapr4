<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1121px" preserveAspectRatio="none" style="width:2549px;height:1121px;" version="1.1" viewBox="0 0 2549 1121" width="2549px" zoomAndPan="magnify"><defs><filter height="300%" id="f1kfz13xl73m22" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1kfz13xl73m22)" height="916.4375" style="stroke:#A80036;stroke-width:1.0;" width="10" x="21.5" y="99.6094"/><rect fill="#FFFFFF" filter="url(#f1kfz13xl73m22)" height="894.0859" style="stroke:#A80036;stroke-width:1.0;" width="10" x="304.5" y="121.9609"/><rect fill="#FFFFFF" filter="url(#f1kfz13xl73m22)" height="794.6797" style="stroke:#A80036;stroke-width:1.0;" width="10" x="607.5" y="152.3125"/><rect fill="#FFFFFF" filter="url(#f1kfz13xl73m22)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="987.5" y="182.6641"/><rect fill="#FFFFFF" filter="url(#f1kfz13xl73m22)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1125.5" y="243.0156"/><rect fill="#FFFFFF" filter="url(#f1kfz13xl73m22)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1261.5" y="303.3672"/><rect fill="#FFFFFF" filter="url(#f1kfz13xl73m22)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1370.5" y="363.7188"/><rect fill="#FFFFFF" filter="url(#f1kfz13xl73m22)" height="121.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1499" y="424.0703"/><rect fill="#FFFFFF" filter="url(#f1kfz13xl73m22)" height="60.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1646" y="454.4219"/><rect fill="#FFFFFF" filter="url(#f1kfz13xl73m22)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1782" y="484.7734"/><rect fill="#FFFFFF" filter="url(#f1kfz13xl73m22)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1782" y="575.4766"/><rect fill="#FFFFFF" filter="url(#f1kfz13xl73m22)" height="60.7031" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1899" y="747.8828"/><rect fill="#FFFFFF" filter="url(#f1kfz13xl73m22)" height="60.7031" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1899" y="871.2891"/><rect fill="#FFFFFF" filter="url(#f1kfz13xl73m22)" height="109.4063" style="stroke:#000000;stroke-width:2.0;" width="1557.5" x="506.5" y="707.1797"/><rect fill="#FFFFFF" filter="url(#f1kfz13xl73m22)" height="109.4063" style="stroke:#000000;stroke-width:2.0;" width="1557.5" x="506.5" y="830.5859"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="26" x2="26" y1="89.6094" y2="1034.0469"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="309.5" x2="309.5" y1="89.6094" y2="1034.0469"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="612.5" x2="612.5" y1="89.6094" y2="1034.0469"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="992" x2="992" y1="89.6094" y2="1034.0469"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1130" x2="1130" y1="89.6094" y2="1034.0469"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1266" x2="1266" y1="89.6094" y2="1034.0469"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1375" x2="1375" y1="89.6094" y2="1034.0469"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1504" x2="1504" y1="89.6094" y2="1034.0469"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1651" x2="1651" y1="89.6094" y2="1034.0469"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1787" x2="1787" y1="89.6094" y2="1034.0469"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1904" x2="1904" y1="89.6094" y2="1034.0469"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2008" x2="2008" y1="89.6094" y2="1034.0469"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2133" x2="2133" y1="89.6094" y2="1034.0469"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2293" x2="2293" y1="89.6094" y2="1034.0469"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2461" x2="2461" y1="89.6094" y2="1034.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="5" y="86.5332">USER</text><ellipse cx="26.5" cy="15" fill="#FEFECE" filter="url(#f1kfz13xl73m22)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M26.5,23 L26.5,50 M13.5,31 L39.5,31 M26.5,50 L13.5,65 M26.5,50 L39.5,65 " fill="none" filter="url(#f1kfz13xl73m22)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="5" y="1047.5801">USER</text><ellipse cx="26.5" cy="1060.6563" fill="#FEFECE" filter="url(#f1kfz13xl73m22)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M26.5,1068.6563 L26.5,1095.6563 M13.5,1076.6563 L39.5,1076.6563 M26.5,1095.6563 L13.5,1110.6563 M26.5,1095.6563 L39.5,1110.6563 " fill="none" filter="url(#f1kfz13xl73m22)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#f1kfz13xl73m22)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="138" x="238.5" y="35.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="252" y="56.9238">&lt;&lt;presentation&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="245.5" y="74.5332">ConsultarPedidosUI</text><rect fill="#FEFECE" filter="url(#f1kfz13xl73m22)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="138" x="238.5" y="1033.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="252" y="1054.5801">&lt;&lt;presentation&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="245.5" y="1072.1895">ConsultarPedidosUI</text><rect fill="#FEFECE" filter="url(#f1kfz13xl73m22)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="188" x="516.5" y="35.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="560.5" y="56.9238">&lt;&lt;application&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="174" x="523.5" y="74.5332">ConsultarPedidosController</text><rect fill="#FEFECE" filter="url(#f1kfz13xl73m22)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="188" x="516.5" y="1033.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="560.5" y="1054.5801">&lt;&lt;application&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="174" x="523.5" y="1072.1895">ConsultarPedidosController</text><rect fill="#FEFECE" filter="url(#f1kfz13xl73m22)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="101" x="940" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="947" y="74.5332">AuthzRegistry</text><rect fill="#FEFECE" filter="url(#f1kfz13xl73m22)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="101" x="940" y="1033.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="947" y="1054.5801">AuthzRegistry</text><rect fill="#FEFECE" filter="url(#f1kfz13xl73m22)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="147" x="1055" y="35.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="1109.5" y="56.9238">authz:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129" x="1066" y="74.5332">AuthorizationService</text><rect fill="#FEFECE" filter="url(#f1kfz13xl73m22)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="147" x="1055" y="1033.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="1109.5" y="1054.5801">authz:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129" x="1066" y="1072.1895">AuthorizationService</text><rect fill="#FEFECE" filter="url(#f1kfz13xl73m22)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="97" x="1216" y="35.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="1225.5" y="56.9238">userSession</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="1223" y="74.5332">:UserSession</text><rect fill="#FEFECE" filter="url(#f1kfz13xl73m22)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="97" x="1216" y="1033.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="1225.5" y="1054.5801">userSession</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="1223" y="1072.1895">:UserSession</text><rect fill="#FEFECE" filter="url(#f1kfz13xl73m22)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="93" x="1327" y="35.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="1335" y="56.9238">systemUser:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="1338" y="74.5332">SystemUser</text><rect fill="#FEFECE" filter="url(#f1kfz13xl73m22)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="93" x="1327" y="1033.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="1335" y="1054.5801">systemUser:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="1338" y="1072.1895">SystemUser</text><rect fill="#FEFECE" filter="url(#f1kfz13xl73m22)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="136" x="1434" y="35.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="1449.5" y="56.9238">&lt;&lt;persistance&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="1441" y="74.5332">PersistenceContext</text><rect fill="#FEFECE" filter="url(#f1kfz13xl73m22)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="136" x="1434" y="1033.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="1449.5" y="1054.5801">&lt;&lt;persistance&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="1441" y="1072.1895">PersistenceContext</text><rect fill="#FEFECE" filter="url(#f1kfz13xl73m22)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="130" x="1584" y="35.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="1611.5" y="56.9238">&lt;&lt;factory&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="1591" y="74.5332">RepositoryFactory</text><rect fill="#FEFECE" filter="url(#f1kfz13xl73m22)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="130" x="1584" y="1033.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="1611.5" y="1054.5801">&lt;&lt;factory&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="1591" y="1072.1895">RepositoryFactory</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="1736.5" y="68.9238">&lt;&lt;repository&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="1728" y="86.5332">PedidoRepository</text><path d="M1769,18.3906 C1769,8.3906 1787,8.3906 1787,8.3906 C1787,8.3906 1805,8.3906 1805,18.3906 L1805,44.3906 C1805,54.3906 1787,54.3906 1787,54.3906 C1787,54.3906 1769,54.3906 1769,44.3906 L1769,18.3906 " fill="#FEFECE" filter="url(#f1kfz13xl73m22)" style="stroke:#000000;stroke-width:1.5;"/><path d="M1769,18.3906 C1769,28.3906 1787,28.3906 1787,28.3906 C1787,28.3906 1805,28.3906 1805,18.3906 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="1736.5" y="1047.5801">&lt;&lt;repository&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="1728" y="1065.1895">PedidoRepository</text><path d="M1769,1078.2656 C1769,1068.2656 1787,1068.2656 1787,1068.2656 C1787,1068.2656 1805,1068.2656 1805,1078.2656 L1805,1104.2656 C1805,1114.2656 1787,1114.2656 1787,1114.2656 C1787,1114.2656 1769,1114.2656 1769,1104.2656 L1769,1078.2656 " fill="#FEFECE" filter="url(#f1kfz13xl73m22)" style="stroke:#000000;stroke-width:1.5;"/><path d="M1769,1078.2656 C1769,1088.2656 1787,1088.2656 1787,1088.2656 C1787,1088.2656 1805,1088.2656 1805,1078.2656 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><rect fill="#FEFECE" filter="url(#f1kfz13xl73m22)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="92" x="1856" y="35.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="1863" y="56.9238">&lt;&lt;domain&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="1880" y="74.5332">Pedido</text><rect fill="#FEFECE" filter="url(#f1kfz13xl73m22)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="92" x="1856" y="1033.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="1863" y="1054.5801">&lt;&lt;domain&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="1880" y="1072.1895">Pedido</text><rect fill="#FEFECE" filter="url(#f1kfz13xl73m22)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="88" x="1962" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="1969" y="74.5332">PedidoDTO</text><rect fill="#FEFECE" filter="url(#f1kfz13xl73m22)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="88" x="1962" y="1033.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="1969" y="1054.5801">PedidoDTO</text><rect fill="#FEFECE" filter="url(#f1kfz13xl73m22)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="131" x="2068" y="31.3906"/><rect fill="#FEFECE" filter="url(#f1kfz13xl73m22)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="131" x="2064" y="35.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="2071" y="56.9238">&lt;&lt;java interface&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="2079" y="74.5332">listaPedidosUser</text><rect fill="#FEFECE" filter="url(#f1kfz13xl73m22)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="131" x="2068" y="1033.0469"/><rect fill="#FEFECE" filter="url(#f1kfz13xl73m22)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="131" x="2064" y="1037.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="2071" y="1058.5801">&lt;&lt;java interface&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="2079" y="1076.1895">listaPedidosUser</text><rect fill="#FEFECE" filter="url(#f1kfz13xl73m22)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="152" x="2217" y="31.3906"/><rect fill="#FEFECE" filter="url(#f1kfz13xl73m22)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="152" x="2213" y="35.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="2230.5" y="56.9238">&lt;&lt;java interface&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134" x="2224" y="74.5332">listaPedidosEmCurso</text><rect fill="#FEFECE" filter="url(#f1kfz13xl73m22)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="152" x="2217" y="1033.0469"/><rect fill="#FEFECE" filter="url(#f1kfz13xl73m22)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="152" x="2213" y="1037.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="2230.5" y="1058.5801">&lt;&lt;java interface&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134" x="2224" y="1076.1895">listaPedidosEmCurso</text><rect fill="#FEFECE" filter="url(#f1kfz13xl73m22)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="148" x="2387" y="31.3906"/><rect fill="#FEFECE" filter="url(#f1kfz13xl73m22)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="148" x="2383" y="35.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="2398.5" y="56.9238">&lt;&lt;java interface&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="2394" y="74.5332">listaPedidosHistorico</text><rect fill="#FEFECE" filter="url(#f1kfz13xl73m22)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="148" x="2387" y="1033.0469"/><rect fill="#FEFECE" filter="url(#f1kfz13xl73m22)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="148" x="2383" y="1037.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="2398.5" y="1058.5801">&lt;&lt;java interface&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="2394" y="1076.1895">listaPedidosHistorico</text><rect fill="#FFFFFF" filter="url(#f1kfz13xl73m22)" height="916.4375" style="stroke:#A80036;stroke-width:1.0;" width="10" x="21.5" y="99.6094"/><rect fill="#FFFFFF" filter="url(#f1kfz13xl73m22)" height="894.0859" style="stroke:#A80036;stroke-width:1.0;" width="10" x="304.5" y="121.9609"/><rect fill="#FFFFFF" filter="url(#f1kfz13xl73m22)" height="794.6797" style="stroke:#A80036;stroke-width:1.0;" width="10" x="607.5" y="152.3125"/><rect fill="#FFFFFF" filter="url(#f1kfz13xl73m22)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="987.5" y="182.6641"/><rect fill="#FFFFFF" filter="url(#f1kfz13xl73m22)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1125.5" y="243.0156"/><rect fill="#FFFFFF" filter="url(#f1kfz13xl73m22)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1261.5" y="303.3672"/><rect fill="#FFFFFF" filter="url(#f1kfz13xl73m22)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1370.5" y="363.7188"/><rect fill="#FFFFFF" filter="url(#f1kfz13xl73m22)" height="121.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1499" y="424.0703"/><rect fill="#FFFFFF" filter="url(#f1kfz13xl73m22)" height="60.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1646" y="454.4219"/><rect fill="#FFFFFF" filter="url(#f1kfz13xl73m22)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1782" y="484.7734"/><rect fill="#FFFFFF" filter="url(#f1kfz13xl73m22)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1782" y="575.4766"/><rect fill="#FFFFFF" filter="url(#f1kfz13xl73m22)" height="60.7031" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1899" y="747.8828"/><rect fill="#FFFFFF" filter="url(#f1kfz13xl73m22)" height="60.7031" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1899" y="871.2891"/><polygon fill="#A80036" points="292.5,117.9609,302.5,121.9609,292.5,125.9609,296.5,121.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="31.5" x2="298.5" y1="121.9609" y2="121.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="38.5" y="117.1045">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="243" x="49.5" y="117.1045">inicia o processo de consulta dos pedidos</text><polygon fill="#A80036" points="595.5,148.3125,605.5,152.3125,595.5,156.3125,599.5,152.3125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="314.5" x2="601.5" y1="152.3125" y2="152.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="321.5" y="147.4561">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="332.5" y="147.4561">getPedidosUser()</text><polygon fill="#A80036" points="975.5,178.6641,985.5,182.6641,975.5,186.6641,979.5,182.6641" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="617.5" x2="981.5" y1="182.6641" y2="182.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="624.5" y="177.8076">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="635.5" y="177.8076">authz=authorizationService()</text><polygon fill="#A80036" points="1113.5,239.0156,1123.5,243.0156,1113.5,247.0156,1117.5,243.0156" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="617.5" x2="1119.5" y1="243.0156" y2="243.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="624.5" y="238.1592">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="635.5" y="238.1592">userSession=session()</text><polygon fill="#A80036" points="1249.5,299.3672,1259.5,303.3672,1249.5,307.3672,1253.5,303.3672" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="617.5" x2="1255.5" y1="303.3672" y2="303.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="624.5" y="298.5107">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191" x="635.5" y="298.5107">systemUser=authenticatedUser()</text><polygon fill="#A80036" points="1358.5,359.7188,1368.5,363.7188,1358.5,367.7188,1362.5,363.7188" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="617.5" x2="1364.5" y1="363.7188" y2="363.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="624.5" y="358.8623">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="635.5" y="358.8623">email= email()</text><polygon fill="#A80036" points="1487,420.0703,1497,424.0703,1487,428.0703,1491,424.0703" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="617.5" x2="1493" y1="424.0703" y2="424.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="624.5" y="419.2139">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="635.5" y="419.2139">repositories()</text><polygon fill="#A80036" points="1634,450.4219,1644,454.4219,1634,458.4219,1638,454.4219" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1509" x2="1640" y1="454.4219" y2="454.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="1516" y="449.5654">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="1527" y="449.5654">create()</text><polygon fill="#A80036" points="1770,480.7734,1780,484.7734,1770,488.7734,1774,484.7734" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1656" x2="1776" y1="484.7734" y2="484.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="1663" y="479.917">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="1674" y="479.917">create()</text><polygon fill="#A80036" points="628.5,541.125,618.5,545.125,628.5,549.125,624.5,545.125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="622.5" x2="1503" y1="545.125" y2="545.125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="634.5" y="540.2686">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="652.5" y="540.2686">PedidoRepository</text><polygon fill="#A80036" points="1770,571.4766,1780,575.4766,1770,579.4766,1774,575.4766" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="617.5" x2="1776" y1="575.4766" y2="575.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="624.5" y="570.6201">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="237" x="642.5" y="570.6201">listaPedidosUser=getPedidosUser(email)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="617.5" x2="659.5" y1="635.8281" y2="635.8281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="659.5" x2="659.5" y1="635.8281" y2="648.8281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="618.5" x2="659.5" y1="648.8281" y2="648.8281"/><polygon fill="#A80036" points="628.5,644.8281,618.5,648.8281,628.5,652.8281,624.5,648.8281" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="624.5" y="630.9717">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="338" x="642.5" y="630.9717">listaPedidosEmCurso=pedidosEmCurso(listaPedidosUser)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="617.5" x2="659.5" y1="679.1797" y2="679.1797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="659.5" x2="659.5" y1="679.1797" y2="692.1797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="618.5" x2="659.5" y1="692.1797" y2="692.1797"/><polygon fill="#A80036" points="628.5,688.1797,618.5,692.1797,628.5,696.1797,624.5,692.1797" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="624.5" y="674.3232">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="332" x="642.5" y="674.3232">listaPedidosHistorico=pedidosHistorico(listaPedidosUser)</text><path d="M506.5,707.1797 L579.5,707.1797 L579.5,715.1797 L569.5,725.1797 L506.5,725.1797 L506.5,707.1797 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="109.4063" style="stroke:#000000;stroke-width:2.0;" width="1557.5" x="506.5" y="707.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="521.5" y="721.6748">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="147" x="594.5" y="720.5986">[foreach Pedido em curso]</text><polygon fill="#A80036" points="1887,743.8828,1897,747.8828,1887,751.8828,1891,747.8828" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="617.5" x2="1893" y1="747.8828" y2="747.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="624.5" y="743.0264">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45" x="642.5" y="743.0264">toDTO()</text><polygon fill="#A80036" points="1996,774.2344,2006,778.2344,1996,782.2344,2000,778.2344" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1909" x2="2002" y1="778.2344" y2="778.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1916" y="773.3779">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="1934" y="773.3779">create</text><polygon fill="#A80036" points="628.5,804.5859,618.5,808.5859,628.5,812.5859,624.5,808.5859" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="622.5" x2="1903" y1="808.5859" y2="808.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="634.5" y="803.7295">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="652.5" y="803.7295">PedidoDTO</text><path d="M506.5,830.5859 L579.5,830.5859 L579.5,838.5859 L569.5,848.5859 L506.5,848.5859 L506.5,830.5859 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="109.4063" style="stroke:#000000;stroke-width:2.0;" width="1557.5" x="506.5" y="830.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="521.5" y="845.0811">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="164" x="594.5" y="844.0049">[foreach pedido em historico]</text><polygon fill="#A80036" points="1887,867.2891,1897,871.2891,1887,875.2891,1891,871.2891" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="617.5" x2="1893" y1="871.2891" y2="871.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="624.5" y="866.4326">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45" x="642.5" y="866.4326">toDTO()</text><polygon fill="#A80036" points="1996,897.6406,2006,901.6406,1996,905.6406,2000,901.6406" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1909" x2="2002" y1="901.6406" y2="901.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1916" y="896.7842">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="1934" y="896.7842">create</text><polygon fill="#A80036" points="628.5,927.9922,618.5,931.9922,628.5,935.9922,624.5,931.9922" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="622.5" x2="1903" y1="931.9922" y2="931.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="634.5" y="927.1357">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="652.5" y="927.1357">PedidoDTO</text><polygon fill="#A80036" points="325.5,965.3438,315.5,969.3438,325.5,973.3438,321.5,969.3438" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="319.5" x2="611.5" y1="969.3438" y2="969.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="331.5" y="964.4873">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="256" x="349.5" y="964.4873">Iterable&lt;PedidoDTO&gt;, Iterable&lt;PedidoDTO&gt;</text><polygon fill="#A80036" points="37.5,1012.0469,27.5,1016.0469,37.5,1020.0469,33.5,1016.0469" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="31.5" x2="308.5" y1="1016.0469" y2="1016.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="43.5" y="1003.0146">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199" x="61.5" y="994.8389">apresenta o historico de pedidos e</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="195" x="65.5" y="1011.1904">os pedidos em curso do utilizador</text><!--MD5=[62248d0d494b735e4012b874048407be]
@startuml
'https://plantuml.com/sequence-diagram

autonumber

actor USER
participant "<<presentation>>\nConsultarPedidosUI" as UI
participant "<<application>>\nConsultarPedidosController" as CONTROLLER
participant "AuthzRegistry" as AUTHZ
participant "authz:\n AuthorizationService" AS AUTHZSERVICE
participant "userSession\n:UserSession" as USERSESSION
participant "systemUser:\n SystemUser" AS SYSTEMUSER
participant "<<persistance>>\nPersistenceContext" as PERS
participant "<<factory>>\nRepositoryFactory" as FACT
database "<<repository>>\nPedidoRepository" as REPO1
participant "<<domain>>\nPedido" as PED
participant "PedidoDTO" as DTO
collections "<<java interface>>\n listaPedidosUser"
collections "<<java interface>>\n listaPedidosEmCurso"
collections "<<java interface>>\n listaPedidosHistorico"

activate USER
    USER->UI: inicia o processo de consulta dos pedidos
    activate UI
        UI->CONTROLLER: getPedidosUser()
        activate CONTROLLER
            CONTROLLER->AUTHZ : authz=authorizationService()
            activate AUTHZ
            deactivate AUTHZ
            CONTROLLER->AUTHZSERVICE :userSession=session()
            activate AUTHZSERVICE
            deactivate AUTHZSERVICE
            CONTROLLER->USERSESSION: systemUser=authenticatedUser()
            activate USERSESSION
            deactivate USERSESSION
            CONTROLLER-> SYSTEMUSER: email= email()
            activate SYSTEMUSER
            deactivate SYSTEMUSER
              CONTROLLER->PERS: repositories()
                        activate PERS
                            PERS->FACT: create()
                            activate FACT
                                FACT->REPO1: create()
                                activate REPO1
                                deactivate REPO1
                            deactivate FACT
                            PERS- ->CONTROLLER: PedidoRepository
                        deactivate PERS
                        CONTROLLER->REPO1: listaPedidosUser=getPedidosUser(email)
                        activate REPO1
                        deactivate REPO1

                        CONTROLLER->CONTROLLER: listaPedidosEmCurso=pedidosEmCurso(listaPedidosUser)
                        CONTROLLER->CONTROLLER: listaPedidosHistorico=pedidosHistorico(listaPedidosUser)
                        loop foreach Pedido em curso
                        CONTROLLER->PED: toDTO()
                        activate PED
                            PED->DTO:create
                            PED- ->CONTROLLER: PedidoDTO
                        deactivate PED
                        end loop

                        loop foreach pedido em historico
                        CONTROLLER->PED: toDTO()
                        activate PED
                            PED->DTO:create
                            PED- ->CONTROLLER: PedidoDTO
                        deactivate PED
                        end loop


        deactivate CONTROLLER

        CONTROLLER- ->UI : Iterable<PedidoDTO>, Iterable<PedidoDTO>
        UI- -> USER: apresenta o historico de pedidos e \n os pedidos em curso do utilizador

    deactivate UI
    deactivate USER

    @enduml

@startuml

autonumber

actor USER
participant "<<presentation>>\nConsultarPedidosUI" as UI
participant "<<application>>\nConsultarPedidosController" as CONTROLLER
participant "AuthzRegistry" as AUTHZ
participant "authz:\n AuthorizationService" AS AUTHZSERVICE
participant "userSession\n:UserSession" as USERSESSION
participant "systemUser:\n SystemUser" AS SYSTEMUSER
participant "<<persistance>>\nPersistenceContext" as PERS
participant "<<factory>>\nRepositoryFactory" as FACT
database "<<repository>>\nPedidoRepository" as REPO1
participant "<<domain>>\nPedido" as PED
participant "PedidoDTO" as DTO
collections "<<java interface>>\n listaPedidosUser"
collections "<<java interface>>\n listaPedidosEmCurso"
collections "<<java interface>>\n listaPedidosHistorico"

activate USER
    USER->UI: inicia o processo de consulta dos pedidos
    activate UI
        UI->CONTROLLER: getPedidosUser()
        activate CONTROLLER
            CONTROLLER->AUTHZ : authz=authorizationService()
            activate AUTHZ
            deactivate AUTHZ
            CONTROLLER->AUTHZSERVICE :userSession=session()
            activate AUTHZSERVICE
            deactivate AUTHZSERVICE
            CONTROLLER->USERSESSION: systemUser=authenticatedUser()
            activate USERSESSION
            deactivate USERSESSION
            CONTROLLER-> SYSTEMUSER: email= email()
            activate SYSTEMUSER
            deactivate SYSTEMUSER
              CONTROLLER->PERS: repositories()
                        activate PERS
                            PERS->FACT: create()
                            activate FACT
                                FACT->REPO1: create()
                                activate REPO1
                                deactivate REPO1
                            deactivate FACT
                            PERS- ->CONTROLLER: PedidoRepository
                        deactivate PERS
                        CONTROLLER->REPO1: listaPedidosUser=getPedidosUser(email)
                        activate REPO1
                        deactivate REPO1

                        CONTROLLER->CONTROLLER: listaPedidosEmCurso=pedidosEmCurso(listaPedidosUser)
                        CONTROLLER->CONTROLLER: listaPedidosHistorico=pedidosHistorico(listaPedidosUser)
                        loop foreach Pedido em curso
                        CONTROLLER->PED: toDTO()
                        activate PED
                            PED->DTO:create
                            PED- ->CONTROLLER: PedidoDTO
                        deactivate PED
                        end loop

                        loop foreach pedido em historico
                        CONTROLLER->PED: toDTO()
                        activate PED
                            PED->DTO:create
                            PED- ->CONTROLLER: PedidoDTO
                        deactivate PED
                        end loop


        deactivate CONTROLLER

        CONTROLLER- ->UI : Iterable<PedidoDTO>, Iterable<PedidoDTO>
        UI- -> USER: apresenta o historico de pedidos e \n os pedidos em curso do utilizador

    deactivate UI
    deactivate USER

    @enduml

PlantUML version 1.2021.5(Sun Apr 25 12:20:28 BST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: Dynamic Code Evolution 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>